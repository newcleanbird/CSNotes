# .vscode 文件夹

## 简介

项目根目录中经常会出现一个``.vscode``文件夹，它是干什么的？
众所周知，vscode 的配置分两类，一是**全局的用户配置**，二是**当前工作区配置**。vscode 打开的文件夹的根目录是一个工作区，.vscode目录就是存放当前工作区相关配置文件的目录。

这样分享项目时，也把该项目的 vscode 配置分享出去了，保证了协同工作开发环境的统一性。

.vscode目录下一般有 4 种配置文件和项目中的代码片段：

1. extensions.json：推荐当前项目使用的插件
2. setting.json：vscode编辑器和插件的相关配置
3. launch.json：调试器设置配置文件
4. task.json：编译器构建配置文件
5. xxxxxxx.code-snippets：项目中共享的代码片段

## 配置IntelliSense

扩展程序会根据当前系统环境配置基本信息，因此有可能配置不完整，这时需要通过生成c_cpp_properties.json文件来配置缺少的信息：

### c_cpp_properties.json

1. ctrl+shift+P打开Command Palette,运行C/Cpp: Edit configurations...生成``c_cpp_properties.json：``

```json
{
    "configurations": [
        {
            "name": "Win32",
            "includePath": [
                "${workspaceFolder}/**",
                //"C:/opt/ros/noetic/x64/include",
                //"C:/opt/ros/noetic/x64/Lib"
                "C:/opt/ros/noetic/x64/**"
            ],
            "defines": [
                "_DEBUG",
                "UNICODE",
                "_UNICODE"
            ],
            "windowsSdkVersion": "10.0.22621.0",
            "cStandard": "c17",
            "cppStandard": "c++17",
            "intelliSenseMode": "windows-msvc-x64"
        }
    ],
    "version": 4
}
```

此文件是c/c++插件对应的配置文件，允许用户更改前面设置中的部分选项，例如编译器的路径，包含路径，C ++标准（默认为C ++ 17）等。

- 配置C/C++插件参数后，自动生成

### tasks.json

编译器构建 配置文件
点击终端，配置任务生成tasks.json

```json
{
    "version": "2.0.0",
    "tasks": [
        {
            "type": "cppbuild",
            "label": "C/C++: g++.exe 生成活动文件",
            "command": "E:/IDE/mingw64/bin/g++.exe",
            "args": [
                "-fdiagnostics-color=always",
                "-g",
                "${workspaceFolder}\\*.cpp",
                "-o",
                "${workspaceFolder}\\${workspaceRootFolderName}.exe"
            ],
            "options": {
                "cwd": "E:/IDE/mingw64/bin"
            },
            "problemMatcher": [
                "$gcc"
            ],
            "group": "build",
            "detail": "编译器: E:/IDE/mingw64/bin/g++.exe"
       }
    ]
}
```

主要修改"args"

```json
“type”: “cppbuild”----表示类型：cpp编译；不能改

“label”: “C/C++: g++.exe生成活动文件”-----表示指定前置任务名称; 需要与launch.json中的preLaunchTask保持一致，否则调试时会提示找不到；

command: “D：\\mingw64\\bin\\g++.exe”------表示编译器所在的位置;

"args": [
                "-fdiagnostics-color=always",   // -fdiagnostics-color=always 彩色警告 ;
                "-g",                           // -g 编译器编译时 , 产生调试信息 ;
                "${workspaceFolder}\\*.cpp",    // ${workspaceFolder}/*.cpp 配置的是源文件 , 在目录下的 cpp 后缀的是源文件 ;
                "-o",                           // -o 编译时的输出路径 ;
                "${workspaceFolder}\\${workspaceRootFolderName}.exe"    // 编译输出的可执行文件路径名
            ],
```

### launch.json

调试器设置配置文件
生成：运行和调试->生成launch.json

```json
{
    // 使用 IntelliSense 了解相关属性。 
    // 悬停以查看现有属性的描述。
    // 欲了解更多信息，请访问: https://go.microsoft.com/fwlink/?linkid=830387
    "version": "0.2.0",
    "configurations": [
        {
            "name": "(gdb) 启动",
            "type": "cppdbg",
            "request": "launch",
            "program": "输入程序名称，例如 ${workspaceFolder}/a.exe",
            "args": [],
            "stopAtEntry": false,
            "cwd": "${fileDirname}",
            "environment": [],
            "externalConsole": false,
            "MIMode": "gdb",
            "miDebuggerPath": "/path/to/gdb",
            "setupCommands": [
                {
                    "description": "为 gdb 启用整齐打印",
                    "text": "-enable-pretty-printing",
                    "ignoreFailures": true
                },
                {
                    "description": "将反汇编风格设置为 Intel",
                    "text": "-gdb-set disassembly-flavor intel",
                    "ignoreFailures": true
                }
            ]
        },
        {
            "name": "g++.exe - 生成和调试活动文件",
            // type 告诉vscode编译器的类型，我用的MinGW64也就是g++，这里是cppdgb
            // 这个是规定的，不是随便写，比如msvc编译器就是cppvsdbg
            "type": "cppdbg",
            "request": "launch",
            // program 这个是你的可执行程序位置，这里可以根据自己的tasks.json生成
            // 程序的位置自定义修改，等会参照后面的tasks.json内容
            "program": "${fileDirname}\\coin\\${fileBasenameNoExtension}.exe",
            // ${xxxx}是vscode内置的变量，可以方便获取到需要的路径或者文件名,
            // 具体什么变量参考别人的博客，
            // 这里列举一部分
            // ${workspaceFolder} :表示当前workspace文件夹路径，也即/home/Coding/Test
            // ${workspaceRootFolderName}:表示workspace的文件夹名，也即Test
            // ${file}:文件自身的绝对路径，也即/home/Coding/Test/.vscode/tasks.json
            // ${relativeFile}:文件在workspace中的路径，也即.vscode/tasks.json
            // ${fileBasenameNoExtension}:当前文件的文件名，不带后缀，也即tasks
            // ${fileBasename}:当前文件的文件名，tasks.json
            // ${fileDirname}:文件所在的文件夹路径，也即/home/Coding/Test/.vscode
            // ${fileExtname}:当前文件的后缀，也即.json
            // ${lineNumber}:当前文件光标所在的行号
            // ${env:PATH}:系统中的环境变量
            "args": [],
            "stopAtEntry": false,
            "cwd": "${fileDirname}",
            "environment": [],
            "externalConsole": true,
            "MIMode": "gdb",
            // 调试器的路径
            "miDebuggerPath": "D:\\IDE\\mingw64\\bin\\gdb.exe",
            "setupCommands": [
                {
                    "description": "为 gdb 启用整齐打印",
                    "text": "-enable-pretty-printing",
                    "ignoreFailures": true
                },
                {
                    "description": "将反汇编风格设置为 Intel",
                    "text": "-gdb-set disassembly-flavor intel",
                    "ignoreFailures": true
                }
            ],
            // preLaunchTask 表示在 执行调试前 要完成的任务
            // 比如这里 要完成 makeRun 这个tasks任务（重新生成程序）
            // 这里的 makeRun 是 tasks.json 中 lable 标记的任务名称
            "preLaunchTask": "C/C++: g++.exe 生成活动文件"
        }
    ]
}
```

主要修改 program 和 miDebuggerPath

## 常用配置信息

### 工作路径

```json
                "${workspaceFolder}/**",
                // ros
                "C:/opt/ros/noetic/x64/include",
                "C:/opt/ros/noetic/x64/Lib"

```

### vscode 内置变量

```json
${workspaceFolder} :表示当前workspace文件夹路径，也即/home/Demo/Test

${workspaceRootFolderName}:表示workspace的文件夹名，也即Test

${file}:文件自身的绝对路径，也即/home/ Demo /Test/.vscode/tasks.json

${relativeFile}:文件在workspace中的路径，也即.vscode/tasks.json

${fileBasenameNoExtension}:当前文件的文件名，不带后缀，也即tasks

${fileBasename}:当前文件的文件名，tasks.json

${fileDirname}:文件所在的文件夹路径，也即/home/Demo /Test/.vscode

${fileExtname}:当前文件的后缀，也即.json

${lineNumber}:当前文件光标所在的行号

${env:PATH}:系统中的环境变量
```
